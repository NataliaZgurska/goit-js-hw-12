{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport Axios from 'axios';\n\n// import { PicturesAPI } from \"./js/imagesAPI\";\n// const pictureAPI = new PicturesAPI();\n\nconst formEl = document.querySelector('.form-search');\nconst imgContainer = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader-container');\n\n// Ховаємо лоадер\nloaderContainer.style.display = 'none';\n\n// Запит на сервер pixabay для отримання картинок\nasync function getPictures(searchText) {\n   const BASE_URL = 'https://pixabay.com/api';\n    const API_KEY = '/?key=42190673-143cbde4cd6a94de75e31d0a4';\n    const SEARCH_PARAMS = `&q=${searchText}`;\n    const PARAMS = '&image_type=photo&orientation=horizontal&safesearch=true';\n    \n    const url = BASE_URL + API_KEY + SEARCH_PARAMS + PARAMS; \n\n    const response = await Axios.get(url);\n    console.log('Запит на сервер', response.data);\n    return response.data;\n}\n\nformEl.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    const query = e.target.elements.text.value;\n        if (query === '') {\n        return\n    };\n\n    // Очищуємо контейнер, показуємо лоадер\n    imgContainer.innerHTML = '';\n    loaderContainer.style.display = 'flex';\n\n// Викликаєм функцію звернення на сервер, Створюємо галерею\n    const {total, hits} = await getPictures(query);\n    console.log('onFormSubmit', total, hits);\n\n// перевірка, що картинки знайдені\n    if (total === 0) {\n        errorShow();\n             // очищуємо форму, ховаємо лоадер\n            formEl.reset();\n            loaderContainer.style.display = 'none';\n        return;\n    }\n\n    const markup = hits.map(imgTemplate).join('');\n    imgContainer.innerHTML = markup;\n\n     // модульне вікно з бібліотеки   \n    let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt', showCounter: false });\n    gallery.refresh();\n\n     // очищуємо форму, ховаємо лоадер\n    formEl.reset();\n    loaderContainer.style.display = 'none';\n}\n\n\n// Формуємо посилання на картинку з інформацією про неї\nfunction imgTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return ` \n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery-figcaption\">\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n  </figcaption>\n  </figure>\n</a >`\n    }\n\n// спливаюче вікно про помилку бібліотеки iziToast\nfunction errorShow() {\n              iziToast.show({\n                    close: true,\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                  messageColor: '#FFFFFF',\n                    messageSize: '10px',\n                    backgroundColor: '#B51B1B',\n                    position: 'topRight',\n                    close: true,\n                  timeout: 10000,\n                  progressBarColor: '#FFFFFF',\n                  maxWidth: '380px',\n                    });\n}"],"names":["formEl","imgContainer","loaderContainer","getPictures","searchText","BASE_URL","API_KEY","SEARCH_PARAMS","PARAMS","url","response","Axios","onFormSubmit","e","query","total","hits","errorShow","markup","imgTemplate","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"owBAWA,MAAMA,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAkB,SAAS,cAAc,mBAAmB,EAGlEA,EAAgB,MAAM,QAAU,OAGhC,eAAeC,EAAYC,EAAY,CACpC,MAAMC,EAAW,0BACVC,EAAU,2CACVC,EAAgB,MAAMH,CAAU,GAChCI,EAAS,2DAETC,EAAMJ,EAAWC,EAAUC,EAAgBC,EAE3CE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,eAAQ,IAAI,kBAAmBC,EAAS,IAAI,EACrCA,EAAS,IACpB,CAEAV,EAAO,iBAAiB,SAAUY,CAAY,EAE9C,eAAeA,EAAaC,EAAG,CAC3BA,EAAE,eAAc,EAChB,MAAMC,EAAQD,EAAE,OAAO,SAAS,KAAK,MACjC,GAAIC,IAAU,GACd,OAIJb,EAAa,UAAY,GACzBC,EAAgB,MAAM,QAAU,OAGhC,KAAM,CAAC,MAAAa,EAAO,KAAAC,CAAI,EAAI,MAAMb,EAAYW,CAAK,EAI7C,GAHA,QAAQ,IAAI,eAAgBC,EAAOC,CAAI,EAGnCD,IAAU,EAAG,CACbE,IAEIjB,EAAO,MAAK,EACZE,EAAgB,MAAM,QAAU,OACpC,MACH,CAED,MAAMgB,EAASF,EAAK,IAAIG,CAAW,EAAE,KAAK,EAAE,EAC5ClB,EAAa,UAAYiB,EAGX,IAAIE,EAAe,aAAc,CAAE,aAAc,IAAK,aAAc,MAAO,YAAa,EAAO,CAAA,EACrG,QAAO,EAGfpB,EAAO,MAAK,EACZE,EAAgB,MAAM,QAAU,MACpC,CAIA,SAASiB,EAAY,CAAC,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAG,CAC3F,MAAO;AAAA,aACIL,CAAa;AAAA;AAAA,kBAERD,CAAY,UAAUE,CAAI;AAAA;AAAA,iEAEqBC,CAAK;AAAA,iEACLC,CAAK;AAAA,oEACFC,CAAQ;AAAA,qEACPC,CAAS;AAAA;AAAA;AAAA,MAIzE,CAGL,SAASV,GAAY,CACPW,EAAS,KAAK,CACR,MAAO,GACP,QAAS,2EACX,aAAc,UACZ,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,MAAO,GACT,QAAS,IACT,iBAAkB,UAClB,SAAU,OAC5B,CAAqB,CACrB"}