{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/render_functions.js","../src/js/showloader.js","../src/js/izitoastshow.js","../src/js/pixabay_api.js","../src/main.js"],"sourcesContent":["export default {\n formEl: document.querySelector('.form-search'),\n imgContainer: document.querySelector('.gallery'),\n loaderContainer: document.querySelector('.loader-container'),\n loaderBtn: document.querySelector('.js-load-btn'),\n}","import refs from \"./refs\";\n\nexport function imgTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return ` \n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery-figcaption\">\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n  </figcaption>\n  </figure>\n</a >`\n    }\n\n\nexport function renderPictures(aray) {\n    const markup = aray.map(imgTemplate).join('');\n    refs.imgContainer.insertAdjacentHTML('beforeend', markup)\n}","import refs from \"./refs\";\nconst { loaderBtn, loaderContainer } = refs;\n\nexport function showLoader() {\n  loaderContainer.classList.remove('hidden');\n}\nexport function hideLoader() {\n  loaderContainer.classList.add('hidden');\n}\nexport function showBtnLoader() {\n  loaderBtn.classList.remove('hidden');\n}\nexport function hideBtnLoader() {\n  loaderBtn.classList.add('hidden');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// спливаюче вікно про помилку бібліотеки iziToast\nexport function errorShow() {\n              iziToast.show({\n                    close: true,\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: '#FFFFFF',\n                    messageSize: '10px',\n                    backgroundColor: '#B51B1B',\n                    position: 'center',\n                    close: true,\n                    timeout: 10000,\n                    progressBarColor: '#FFFFFF',\n                    maxWidth: '380px',\n              });\n}\n\n// спливаюче вікно кінець колекції\nexport function theendShow() {\n              iziToast.show({\n                    close: true,\n                    message: 'We are sorry, but you have reached the end of search results',\n                    messageColor: '#FFFFFF',\n                    messageSize: '10px',\n                    backgroundColor: '#004ff9c7',\n                    position: 'bottomCenter',\n                    close: true,\n                    timeout: 10000,\n                    progressBarColor: '#FFFFFF',\n                    maxWidth: '380px',\n                 });\n}","import axios from 'axios';\n\nexport class PicturesAPI {\n    constructor() {}\n  \n    async getPictures(searchText, page_number, per_page) {\n        const BASE_URL = 'https://pixabay.com/api';\n        const API_KEY = '/?key=42190673-143cbde4cd6a94de75e31d0a4';\n        const PARAMS = '&image_type=photo&orientation=horizontal&safesearch=true&per_page=';\n        const PAGE = '&page=';\n        const SEARCH_PARAMS = `&q=${searchText}`;\n        \n        const url = `${BASE_URL}${API_KEY}${SEARCH_PARAMS}${PARAMS}${per_page}${PAGE}${page_number}`\n\n        const response = await axios.get(url);\n        return response.data;\n    }\n\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport Axios from 'axios';\n\nimport { renderPictures, imgTemplate } from \"./js/render_functions\";\nimport { showBtnLoader, hideBtnLoader, showLoader, hideLoader } from \"./js/showloader\";\nimport { errorShow, theendShow } from \"./js/izitoastshow\";\n\nimport refs from \"./js/refs\";\nconst {formEl, imgContainer, loaderBtn} = refs;\n\nimport { PicturesAPI } from \"./js/pixabay_api\";\nconst pictureAPI = new PicturesAPI();\n\nlet currentPage;\nconst PER_PAGE = 15;\nlet query = '';\n\nformEl.addEventListener('submit', onFormSubmit);\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.text.value.trim();\n  if (query === '') {\n      imgContainer.innerHTML = '';\n      return\n  };\n  \n  imgContainer.innerHTML = '';\n  showLoader();\n  currentPage = 1;\n  const { totalHits, hits } = await pictureAPI.getPictures(query, currentPage, PER_PAGE);\n \n  // перевірка, що картинки знайдені\n  if (hits.length === 0) {\n     errorShow();\n     formEl.reset();\n     hideLoader();\n     return;\n  }\n  \n  renderPictures(hits);\n  // модульне вікно з бібліотеки   \n  let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt', showCounter: false });\n    \n  formEl.reset();\n  hideLoader();\n  isLastPage(totalHits);\n}\n\nloaderBtn.addEventListener('click', loadMore)\nasync function loadMore() {\n  currentPage += 1;\n  showLoader();\n  hideBtnLoader();\n\n  const { totalHits, hits } = await pictureAPI.getPictures(query, currentPage, PER_PAGE);\n  renderPictures(hits);\n  \n  hideLoader();\n  isLastPage(totalHits);\n\n}\n\nfunction isLastPage(totalHits) {\n  if (currentPage <= totalHits/PER_PAGE) {\n     showBtnLoader();\n  } else {\n    theendShow();\n  }\n}\n\n\n"],"names":["refs","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderPictures","aray","markup","loaderBtn","loaderContainer","showLoader","hideLoader","showBtnLoader","hideBtnLoader","errorShow","iziToast","theendShow","PicturesAPI","searchText","page_number","per_page","BASE_URL","API_KEY","PARAMS","PAGE","SEARCH_PARAMS","url","axios","formEl","imgContainer","pictureAPI","currentPage","PER_PAGE","query","onFormSubmit","e","totalHits","hits","SimpleLightbox","isLastPage","loadMore"],"mappings":"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"}